---
toc: true
layout: post
title: Traffic-Aware Route Finder
permalink: /route/
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic-Aware Route Finder</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        .route { border: 1px solid #ccc; padding: 10px; margin-top: 10px; border-radius: 5px; }
        .loading { font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Traffic-Aware Route Finder</h1>
        <input type="text" id="origin" placeholder="Enter origin" style="width:100%; padding:8px; margin-bottom:10px;">
        <input type="text" id="destination" placeholder="Enter destination" style="width:100%; padding:8px; margin-bottom:10px;">
        <button onclick="getRoutes()" style="padding:10px 15px; background-color:blue; color:white; border:none; cursor:pointer;">Get Routes</button>
        <div id="routes" style="margin-top:20px;"></div>
    </div>

    <script>
        function getRoutes() {
            const origin = document.getElementById('origin').value;
            const destination = document.getElementById('destination').value;
            const routesDiv = document.getElementById('routes');
            routesDiv.innerHTML = '<p class="loading">Loading...</p>';
            
            fetch('http://127.0.0.1:8888/get_routes', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ origin, destination })
            })
            .then(response => response.json())
            .then(data => {
                routesDiv.innerHTML = '';
                if (data.length === 0) {
                    routesDiv.innerHTML = '<p>No routes found.</p>';
                    return;
                }
                
                data.forEach((route, index) => {
                    const routeElement = document.createElement('div');
                    routeElement.className = 'route';
                    routeElement.innerHTML = `
                        <h3>Route ${index + 1}</h3>
                        <p><strong>Total Distance:</strong> ${route.total_distance}</p>
                        <p><strong>Total Duration:</strong> ${route.total_duration}</p>
                        <p><strong>Traffic Score:</strong> ${route.traffic_score}</p>
                        <h4>Steps:</h4>
                    `;
                    route.details.forEach((step, i) => {
                        routeElement.innerHTML += `
                            <p><strong>Step ${i + 1}:</strong> ${step.instruction}</p>
                            <p style="color:gray;">${step.distance} | ${step.duration}</p>
                            ${step.traffic_count > 0 ? `<p style="color:red;">Traffic Count: ${step.traffic_count}</p>` : ''}
                        `;
                    });
                    routesDiv.appendChild(routeElement);
                });
            })
            .catch(error => {
                console.error('Error fetching routes:', error);
                routesDiv.innerHTML = '<p>Error fetching routes.</p>';
            });
        }
    </script>
</body>
</html>
